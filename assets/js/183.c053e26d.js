(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{793:function(e,s,t){"use strict";t.r(s);var a=t(6),r=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"docker概念介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker概念介绍"}},[e._v("#")]),e._v(" Docker概念介绍")]),e._v(" "),t("h2",{attrs:{id:"_1-docker架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-docker架构"}},[e._v("#")]),e._v(" 1. Docker架构")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://ian-kevin.oss-cn-beijing.aliyuncs.com/img/image-20220517014903174.png",alt:"image-20220517014903174"}})]),e._v(" "),t("p",[e._v("从上图得知，Docker分为三部分，"),t("code",[e._v("客户端")]),e._v("，"),t("code",[e._v("Docker服务端")]),e._v("，"),t("code",[e._v("仓库")]),e._v("。")]),e._v(" "),t("h3",{attrs:{id:"_1-1-客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-客户端"}},[e._v("#")]),e._v(" 1.1 客户端")]),e._v(" "),t("p",[e._v("平常我们使用的就是客户端，通过客户端"),t("code",[e._v("命令")]),e._v("和Docker引擎进行交互")]),e._v(" "),t("p",[e._v("Docker 是一个客户端-服务器（C/S）架构程序。")]),e._v(" "),t("p",[e._v("Docker 客户端只需要向 Docker 服务端发起请求，服务端将完成所有的工作并返回相应结果。")]),e._v(" "),t("p",[e._v("Docker 提供了一个命令行工具 "),t("code",[e._v("docker")]),e._v(" 以及一整套 RESTful API。")]),e._v(" "),t("p",[e._v("比如：")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" pull \n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run \n")])])]),t("p",[t("strong",[e._v("客户端可以和服务端在一台宿主机上，也可以不在")])]),e._v(" "),t("h3",{attrs:{id:"_1-2-docker服务端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-docker服务端"}},[e._v("#")]),e._v(" 1.2 Docker服务端")]),e._v(" "),t("p",[e._v("Docker服务端 又称为Docker主机，Docker引擎，Docker守护进程。")]),e._v(" "),t("p",[e._v("依托于"),t("code",[e._v("宿主机")]),e._v("，守护进程，用于管理镜像，容器，执行客户端命令等。")]),e._v(" "),t("h3",{attrs:{id:"_1-3-仓库registry"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-仓库registry"}},[e._v("#")]),e._v(" 1.3 仓库Registry")]),e._v(" "),t("p",[e._v("Docker有两个重要的概念"),t("code",[e._v("镜像")]),e._v("和"),t("code",[e._v("容器")]),e._v("。")]),e._v(" "),t("p",[e._v("镜像可以理解为就是软件安装包，容器就是软件安装完成后可运行的状态。")]),e._v(" "),t("p",[e._v("既然镜像是软件安装包，那么这个安装包从哪下载呢？")]),e._v(" "),t("p",[e._v("Docker推出了"),t("code",[e._v("Registry")]),e._v("这个概念，一般有人也称为是 注册中心，当我们需要发布Docker镜像（Docker专用软件安装包）的时候，就需要将镜像发布到注册中心上，这样其他人就可以下载使用。")]),e._v(" "),t("p",[e._v("Registry 分为"),t("code",[e._v("公共")]),e._v("和"),t("code",[e._v("私有")]),e._v("两种。Docker 公司运营公共的 Registry 叫做 "),t("code",[e._v("Docker Hub")]),e._v("，地址为："),t("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://hub.docker.com"),t("OutboundLink")],1)]),e._v(" "),t("ul",[t("li",[t("p",[e._v("一个 Docker Registry 中可以包含多个仓库（Repository）")])]),e._v(" "),t("li",[t("p",[e._v("每个仓库可以包含多个标签（Tag）")])]),e._v(" "),t("li",[t("p",[e._v("每个标签对应一个镜像")])])]),e._v(" "),t("p",[e._v("通常，一个仓库会包含同一个软件不同版本的镜像，而标签对应该软件的各个版本。我们可以通过 "),t("strong",[e._v("「<仓库名>:<标签>」")]),e._v(" 的格式来指定具体是这个软件哪个版本的镜像。如果不给出标签，将以 "),t("strong",[e._v("「latest」")]),e._v(" 作为默认标签。")]),e._v(" "),t("h2",{attrs:{id:"_2-镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-镜像"}},[e._v("#")]),e._v(" 2. 镜像")]),e._v(" "),t("p",[e._v("上面我们提到，"),t("code",[e._v("镜像可以理解为就是软件安装包")]),e._v("，但是这个软件安装包和我们理解意义上是不一样的，一个Docker镜像是"),t("code",[e._v("一个完整的操作系统的描述")]),e._v("。")]),e._v(" "),t("p",[e._v("什么意思呢？")]),e._v(" "),t("p",[e._v("就是一个Docker镜像描述了，"),t("code",[e._v("需要运行的程序以及运行程序所处的操作系统")])]),e._v(" "),t("p",[e._v("那不同的镜像区别在哪里呢？镜像中的操作系统中安装的软件不同，运行的程序不同。")]),e._v(" "),t("p",[e._v("当然镜像只是一个可执行的包，其中包括运行应用程序所需要的所有内容：包含代码，运行时间，库，环境变量和配置文件等。")]),e._v(" "),t("p",[e._v("真正运行，我们需要"),t("code",[e._v("通过镜像启动容器")]),e._v("。")]),e._v(" "),t("p",[e._v("容器才是真正的可运行的操作系统。")]),e._v(" "),t("p",[e._v("Docker 把 App 文件打包成为一个镜像，并且采用类似多次快照的存储技术，可以实现：")]),e._v(" "),t("ul",[t("li",[e._v("多个 App 可以共用相同的底层镜像（初始的操作系统镜像）；")]),e._v(" "),t("li",[e._v("App 运行时的 IO 操作和镜像文件隔离；")]),e._v(" "),t("li",[e._v("通过挂载包含不同配置/数据文件的目录或者卷（Volume），单个 App 镜像可以用来运行无数个不同业务的容器。")])]),e._v(" "),t("h2",{attrs:{id:"_3-容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-容器"}},[e._v("#")]),e._v(" 3. 容器")]),e._v(" "),t("p",[e._v("镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。")]),e._v(" "),t("p",[e._v("容器可以被创建、启动、停止、删除、暂停等。")]),e._v(" "),t("p",[t("strong",[e._v("注意：容器运行需要指定镜像，当容器运行后，一个容器就相当于一个虚拟的完整的操作系统，比如你通过mysql的镜像来安装mysql，当mysql的容器启动后，就相当于开启了一个操作系统，mysql只是安装在此容器内部的操作系统中，我们可以进入容器内部操作mysql（和正常操作系统一致），也可以通过docker命令来操作")])]),e._v(" "),t("h2",{attrs:{id:"_4-安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装docker"}},[e._v("#")]),e._v(" 4. 安装docker")]),e._v(" "),t("p",[e._v("官方文档教程：https://docs.docker.com/engine/install/centos/")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("卸载原有的版本")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum remove "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n                  docker-client "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n                  docker-client-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n                  docker-common "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n                  docker-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n                  docker-latest-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n                  docker-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n                  docker-engine\n")])])])]),e._v(" "),t("li",[t("p",[e._v("安装 "),t("code",[e._v("yum-utils")])]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" -y yum-utils\n")])])])]),e._v(" "),t("li",[t("p",[e._v("添加阿里云镜像")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])])])]),e._v(" "),t("li",[t("p",[e._v("安装")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" docker-ce docker-ce-cli containerd.io\n")])])])]),e._v(" "),t("li",[t("p",[e._v("启动并加入开机启动")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl start "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("enable")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v("\n")])])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);
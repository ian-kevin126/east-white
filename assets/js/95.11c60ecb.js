(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{700:function(t,a,s){"use strict";s.r(a);var n=s(6),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"go-mod"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#go-mod"}},[t._v("#")]),t._v(" go mod")]),t._v(" "),s("p",[t._v("最早的时候，Go 语言所依赖的所有的第三方库都放在 GOPATH 这个目录下面，这就导致了同一个库只能保存一个版本的代码。如果不同的项目依赖同一个第三方的库的不同版本，应该怎么解决？")]),t._v(" "),s("p",[t._v("go module 是 Go 语言从 1.11 版本之后官方推出的版本管理工具，并且从 Go1.13 版本开始，go module 成为了 Go 语言默认的依赖管理工具。")]),t._v(" "),s("p",[t._v("Modules 官方定义为：")]),t._v(" "),s("blockquote",[s("p",[t._v("Modules 是相关 Go 包的集合，是源代码交换和版本控制的单元。Go语言命令直接支持使用 Modules，包括记录和解析对其他模块的依赖性，Modules 替换旧的基于 GOPATH 的方法，来指定使用哪些源文件。")])]),t._v(" "),s("h2",{attrs:{id:"一、如何使用-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、如何使用-modules"}},[t._v("#")]),t._v(" 一、如何使用 Modules？")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("首先需要把 golang 升级到 1.11 版本以上（现在 1.13 已经发布了，建议使用 1.13）。")])]),t._v(" "),s("li",[s("p",[t._v("使用go module之前需要设置环境变量：")]),t._v(" "),s("ol",[s("li",[t._v("GO111MODULE=on")]),t._v(" "),s("li",[t._v("GOPROXY="),s("a",{attrs:{href:"https://goproxy.io%2Cdirect/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://goproxy.io,direct"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("GOPROXY=https://goproxy.cn,direct(国内的七牛云提供)")])]),t._v(" "),s("p",[s("strong",[t._v("GO111MODULE 有三个值：off, on和auto（默认值）。")])]),t._v(" "),s("ul",[s("li",[t._v("GO111MODULE=off，go命令行将不会支持module功能，寻找依赖包的方式将会沿用旧版本那种通过vendor目录或者GOPATH模式来查找。")]),t._v(" "),s("li",[t._v("GO111MODULE=on，go命令行会使用modules，而一点也不会去GOPATH目录下查找。")]),t._v(" "),s("li",[t._v("GO111MODULE=auto，默认值，go命令行将会根据当前目录来决定是否启用module功能。这种情况下可以分为两种情形：\n"),s("ul",[s("li",[t._v("当前目录在GOPATH之外且该目录包含go.mod文件 开启")]),t._v(" "),s("li",[t._v("当处于 GOPATH 内且没有 go.mod 文件存在时其行为会等同于 GO111MODULE=off")])])]),t._v(" "),s("li",[t._v("如果不使用 Go Modules, go get 将会从模块代码的 master 分支拉取")]),t._v(" "),s("li",[t._v("而若使用 Go Modules 则你可以利用 Git Tag 手动选择一个特定版本的模块代码")])])])]),t._v(" "),s("h3",{attrs:{id:"_1、go111module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、go111module"}},[t._v("#")]),t._v(" 1、GO111MODULE")]),t._v(" "),s("p",[t._v("在 Go 语言 1.12 版本之前，要启用 go module 工具首先要设置环境变量 GO111MODULE，不过在 Go 语言 1.13 及以后的版本则不再需要设置环境变量。通过 GO111MODULE 可以开启或关闭 go module 工具。")]),t._v(" "),s("ul",[s("li",[t._v("GO111MODULE=off 禁用 go module，编译时会从 GOPATH 和 vendor 文件夹中查找包；")]),t._v(" "),s("li",[t._v("GO111MODULE=on 启用 go module，编译时会忽略 GOPATH 和 vendor 文件夹，只根据 go.mod 下载依赖；")]),t._v(" "),s("li",[t._v("GO111MODULE=auto（默认值），当项目在 GOPATH/src 目录之外，并且项目根目录有 go.mod 文件时，开启 go module。")])]),t._v(" "),s("p",[t._v("Windows 下开启 GO111MODULE 的命令为：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("set GO111MODULE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("on 或者 set GO111MODULE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("auto\n")])])]),s("p",[t._v("MacOS 或者 Linux 下开启 GO111MODULE 的命令为：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("export GO111MODULE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("on 或者 export GO111MODULE"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("auto\n")])])]),s("p",[t._v("在开启 GO111MODULE 之后就可以使用 go module 工具了，也就是说在以后的开发中就没有必要在 GOPATH 中创建项目了，并且还能够很好的管理项目依赖的第三方包信息。")]),t._v(" "),s("p",[t._v("常用的"),s("code",[t._v("go mod")]),t._v("命令如下表所示：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("go mod download")]),t._v(" "),s("td",[t._v("下载依赖包到本地（默认为 GOPATH/pkg/mod 目录）")])]),t._v(" "),s("tr",[s("td",[t._v("go mod edit")]),t._v(" "),s("td",[t._v("编辑 go.mod 文件")])]),t._v(" "),s("tr",[s("td",[t._v("go mod graph")]),t._v(" "),s("td",[t._v("打印模块依赖图")])]),t._v(" "),s("tr",[s("td",[t._v("go mod init")]),t._v(" "),s("td",[t._v("初始化当前文件夹，创建 go.mod 文件")])]),t._v(" "),s("tr",[s("td",[t._v("go mod tidy")]),t._v(" "),s("td",[t._v("增加缺少的包，删除无用的包")])]),t._v(" "),s("tr",[s("td",[t._v("go mod vendor")]),t._v(" "),s("td",[t._v("将依赖复制到 vendor 目录下")])]),t._v(" "),s("tr",[s("td",[t._v("go mod verify")]),t._v(" "),s("td",[t._v("校验依赖")])]),t._v(" "),s("tr",[s("td",[t._v("go mod why")]),t._v(" "),s("td",[t._v("解释为什么需要依赖")])])])]),t._v(" "),s("ul",[s("li",[t._v("常用的有 "),s("code",[t._v("init tdiy edit")])])]),t._v(" "),s("p",[s("strong",[t._v("使用go get命令下载指定版本的依赖包：")])]),t._v(" "),s("p",[t._v("执行"),s("code",[t._v("go get")]),t._v("命令，在下载依赖包的同时还可以指定依赖包的版本。")]),t._v(" "),s("ul",[s("li",[t._v("运行"),s("code",[t._v("go get -u")]),t._v("命令会将项目中的包升级到最新的次要版本或者修订版本；")]),t._v(" "),s("li",[t._v("运行"),s("code",[t._v("go get -u=patch")]),t._v("命令会将项目中的包升级到最新的修订版本；")]),t._v(" "),s("li",[t._v("运行"),s("code",[t._v("go get [包名]@[版本号]")]),t._v("命令会下载对应包的指定版本或者将对应包升级到指定的版本。")])]),t._v(" "),s("blockquote",[s("p",[t._v("提示："),s("code",[t._v("go get [包名]@[版本号]")]),t._v("命令中版本号可以是 x.y.z 的形式，例如 go get foo@v1.2.3，也可以是 git 上的分支或 tag，例如 go get foo@master，还可以是 git 提交时的哈希值，例如 go get foo@e3702bed2。")])]),t._v(" "),s("h4",{attrs:{id:"项目中使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目中使用"}},[t._v("#")]),t._v(" 项目中使用")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("在 GOPATH 目录下新建一个目录，并使用"),s("code",[t._v("go mod init")]),t._v("初始化生成 go.mod 文件。")]),t._v(" "),s("p",[t._v("go.mod 文件一旦创建后，它的内容将会被 go toolchain 全面掌控，go toolchain 会在各类命令执行时，比如"),s("code",[t._v("go get")]),t._v("、"),s("code",[t._v("go build")]),t._v("、"),s("code",[t._v("go mod")]),t._v("等修改和维护 go.mod 文件。")]),t._v(" "),s("p",[t._v("go.mod 提供了 module、require、replace 和 exclude 四个命令：")]),t._v(" "),s("ul",[s("li",[t._v("module 语句指定包的名字（路径）；")]),t._v(" "),s("li",[t._v("require 语句指定的依赖项模块；")]),t._v(" "),s("li",[t._v("replace 语句可以替换依赖项模块；")]),t._v(" "),s("li",[t._v("exclude 语句可以忽略依赖项模块。")])]),t._v(" "),s("p",[t._v("初始化生成的 go.mod 文件如下所示：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("module hello\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.13")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("添加依赖。")]),t._v(" "),s("p",[t._v("新建一个 main.go 文件，写入以下代码：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"net/http"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/labstack/echo"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    e "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" echo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c echo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fatal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('":1323"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("执行"),s("code",[t._v("go mod tidy")]),t._v("运行代码会发现 go mod 会自动查找依赖自动下载")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" finding module "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" found github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo in github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("incompatible\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" finding module "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("stretchr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("testify"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("assert\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" finding module "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" finding module "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("color\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" finding module "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("acme"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("autocert\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" found github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("color in github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" found github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("log in github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" found golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("acme"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("autocert in golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20220112180741")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("5e0467b6c7ce\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" found github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("stretchr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("testify"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("assert in github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("stretchr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("testify v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.0")]),t._v("\n\n")])])]),s("p",[t._v("go.mod中的内容：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("module learning09\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.17")]),t._v("\n\nrequire github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("incompatible\n\nrequire "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mattn"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("colorable v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mattn"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("isatty v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.14")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("valyala"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bytebufferpool v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n\tgithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("valyala"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("fasttemplate v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n\tgolang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20220112180741")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("5e0467b6c7ce "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n\tgolang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("net v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20211112202133")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("69e39bad7dc2 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n\tgolang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("sys v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20211103235746")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("7861aae1554b "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n\tgolang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("text v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.6")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),s("p",[s("strong",[t._v("go module 安装 package 的原则是先拉取最新的 release tag，若无 tag 则拉取最新的 commit")])]),t._v(" "),s("p",[t._v("go 会自动生成一个 go.sum 文件来记录 dependency tree。")]),t._v(" "),s("p",[t._v("执行脚本"),s("code",[t._v("go run main.go")]),t._v("，就可以运行项目。")]),t._v(" "),s("p",[t._v("可以使用命令"),s("code",[t._v("go list -m -u all")]),t._v("来检查可以升级的 package，使用"),s("code",[t._v("go get -u need-upgrade-package")]),t._v("升级后会将新的依赖版本更新到 go.mod ，")]),t._v(" "),s("p",[t._v("比如："),s("code",[t._v("go get -u github.com/labstack/gommon")])]),t._v(" "),s("p",[t._v("也可以使用"),s("code",[t._v("go get -u")]),t._v("升级所有依赖。")])]),t._v(" "),s("li",[s("p",[t._v("一般使用包之前，是首先执行"),s("code",[t._v("go get")]),t._v("命令，先下载依赖。比如 "),s("code",[t._v("github.com/labstack/echo")])])])]),t._v(" "),s("p",[s("strong",[t._v("使用 replace 替换无法直接获取的 package：")])]),t._v(" "),s("p",[t._v("由于某些已知的原因，并不是所有的 package 都能成功下载，比如：golang.org 下的包。")]),t._v(" "),s("p",[t._v("modules 可以通过在 go.mod 文件中使用 replace 指令替换成 github 上对应的库，比如：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("replace "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20190313024323")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("a1f597ede03a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("golang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20190313024323")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("a1f597ede03a\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("或者")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("replace golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20190313024323")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("a1f597ede03a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("golang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20190313024323")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("a1f597ede03a\n")])])]),s("blockquote",[s("p",[s("code",[t._v("go install")]),t._v("命令将项目打包安装为可执行文件，在安装在GOPATH的bin目录下，go install执行的项目 必须有main方法")])]),t._v(" "),s("h3",{attrs:{id:"_2、goproxy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、goproxy"}},[t._v("#")]),t._v(" 2、GOPROXY")]),t._v(" "),s("p",[t._v("proxy 顾名思义就是代理服务器的意思。大家都知道，国内的网络有防火墙的存在，这导致有些 Go 语言的第三方包我们无法直接通过"),s("code",[t._v("go get")]),t._v("命令获取。GOPROXY 是 Go 语言官方提供的一种通过中间代理商来为用户提供包下载服务的方式。要使用 GOPROXY 只需要设置环境变量 GOPROXY 即可。")]),t._v(" "),s("p",[t._v("目前公开的代理服务器的地址有：")]),t._v(" "),s("ul",[s("li",[t._v("goproxy.io；")]),t._v(" "),s("li",[t._v("goproxy.cn：（推荐）由国内的七牛云提供。")])]),t._v(" "),s("p",[t._v("Windows 下设置 GOPROXY 的命令为：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("w GOPROXY"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goproxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("direct\n")])])]),s("p",[t._v("MacOS 或 Linux 下设置 GOPROXY 的命令为：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("export GOPROXY"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("goproxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn\n")])])]),s("p",[t._v("Go 语言在 1.13 版本之后 GOPROXY 默认值为 https://proxy.golang.org，在国内可能会存在下载慢或者无法访问的情况，所以十分建议大家将 GOPROXY 设置为国内的 goproxy.cn。")]),t._v(" "),s("h3",{attrs:{id:"_3、go-get"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、go-get"}},[t._v("#")]),t._v(" 3、go get")]),t._v(" "),s("p",[t._v("执行"),s("code",[t._v("go get")]),t._v("命令，在下载依赖包的同时还可以指定依赖包的版本。")]),t._v(" "),s("ul",[s("li",[t._v("运行"),s("code",[t._v("go get -u")]),t._v("命令会将项目中的包升级到最新的次要版本或者修订版本；")]),t._v(" "),s("li",[t._v("运行"),s("code",[t._v("go get -u=patch")]),t._v("命令会将项目中的包升级到最新的修订版本；")]),t._v(" "),s("li",[t._v("运行"),s("code",[t._v("go get [包名]@[版本号]")]),t._v("命令会下载对应包的指定版本或者将对应包升级到指定的版本。")])]),t._v(" "),s("blockquote",[s("p",[t._v("提示："),s("code",[t._v("go get [包名]@[版本号]")]),t._v("命令中版本号可以是 x.y.z 的形式，例如 go get foo@v1.2.3，也可以是 git 上的分支或 tag，例如 go get foo@master，还可以是 git 提交时的哈希值，例如 go get foo@e3702bed2。")])]),t._v(" "),s("h2",{attrs:{id:"二、如何在项目中使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、如何在项目中使用"}},[t._v("#")]),t._v(" 二、如何在项目中使用")]),t._v(" "),s("h3",{attrs:{id:"_1、初始化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、初始化"}},[t._v("#")]),t._v(" 1、初始化")]),t._v(" "),s("p",[t._v("创建一个新项目，在 GOPATH 目录之外新建一个目录，并使用"),s("code",[t._v("go mod init")]),t._v("初始化生成 go.mod 文件。")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" mod init hello\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" creating "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" module hello\n")])])]),s("p",[t._v("go.mod 文件一旦创建后，它的内容将会被 go toolchain 全面掌控，go toolchain 会在各类命令执行时，比如"),s("code",[t._v("go get")]),t._v("、"),s("code",[t._v("go build")]),t._v("、"),s("code",[t._v("go mod")]),t._v("等修改和维护 go.mod 文件。")]),t._v(" "),s("p",[t._v("go.mod 提供了 module、require、replace 和 exclude 四个命令：")]),t._v(" "),s("ul",[s("li",[t._v("module 语句指定包的名字（路径）；")]),t._v(" "),s("li",[t._v("require 语句指定的依赖项模块；")]),t._v(" "),s("li",[t._v("replace 语句可以替换依赖项模块；")]),t._v(" "),s("li",[t._v("exclude 语句可以忽略依赖项模块。")])]),t._v(" "),s("p",[t._v("初始化生成的 go.mod 文件如下所示：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("module hello\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.13")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2、添加依赖。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、添加依赖。"}},[t._v("#")]),t._v(" 2、添加依赖。")]),t._v(" "),s("p",[t._v("新建一个 main.go 文件，写入以下代码：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"net/http"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/labstack/echo"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  e "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" echo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c echo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fatal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('":1323"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("执行"),s("code",[t._v("go run main.go")]),t._v("运行代码会发现 go mod 会自动查找依赖自动下载：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" run main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" finding github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("incompatible\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" downloading github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("incompatible\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" extracting github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("incompatible\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" finding github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" finding golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("text v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),t._v("\n  ____  __\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" __"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("___"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" ___\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// __/ _ \\/ _ \\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("___"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\\__"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//_/\\___/ v3.3.10-dev")]),t._v("\nHigh performance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" minimalist Go web framework\nhttps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\n____________________________________O"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("_______\n                           O\\\n⇨ http server started on "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1323")]),t._v("\n")])])]),s("p",[t._v("现在查看 go.mod 内容：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("module hello\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.13")]),t._v("\n\nrequire "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("incompatible "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n  github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n  golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20191206172530")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("e9b2fee46413 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("go module 安装 package 的原则是先拉取最新的 release tag，若无 tag 则拉取最新的 commit，详见"),s("a",{attrs:{href:"https://github.com/golang/go/wiki/Modules",target:"_blank",rel:"noopener noreferrer"}},[t._v(" Modules 官方"),s("OutboundLink")],1),t._v("介绍。")]),t._v(" "),s("p",[t._v("go 会自动生成一个 go.sum 文件来记录 dependency tree：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("davecgh"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("spew v1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mod h1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("J7Y8YcW2NihsgmVo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mv3lAwl"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("skON4iLHjSsI"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("c5H38"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\ngithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("incompatible h1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("pGRcYk231ExFAyoAjAfD85kQzRJCRI8bbnE7CX5OEgg"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\ngithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("incompatible"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mod h1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("0INS7j"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("VjnFxD4E2wkz67b8cVwCLbBmJyDaka6Cmk1s"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\ngithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),t._v(" h1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("JEeO0bvc78PKdyHxloTKiF8BD5iGrH8T6MSeGvSgob0"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\ngithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mod h1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("MULnywXg0yavhxWKc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("lOruYdAhDwPK9wf0OL7NoOu"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("k"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\ngithub"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mattn"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("colorable v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.2")]),t._v(" h1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bC9yWikZXAL9uJdulbSfyVNIR3n3trXl"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("v8"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("1sx8mU"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])]),s("p",[t._v("再次执行脚本"),s("code",[t._v("go run main.go")]),t._v("发现跳过了检查并安装依赖的步骤。")]),t._v(" "),s("p",[t._v("可以使用命令"),s("code",[t._v("go list -m -u all")]),t._v("来检查可以升级的 package，使用"),s("code",[t._v("go get -u need-upgrade-package")]),t._v("升级后会将新的依赖版本更新到 go.mod * 也可以使用"),s("code",[t._v("go get -u")]),t._v("升级所有依赖。")]),t._v(" "),s("h3",{attrs:{id:"_3、改造现有项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、改造现有项目"}},[t._v("#")]),t._v(" 3、改造现有项目")]),t._v(" "),s("p",[t._v("项目目录结构为：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("├─ main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v("\n│\n└─ api\n   └─ apis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v("\n")])])]),s("p",[t._v("main.go 源码为：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  api "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./api"')]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里使用的是相对路径")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/labstack/echo"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  e "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" echo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HelloWorld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fatal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('":1323"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("api/apis.go 源码为：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" api\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"net/http"')]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/labstack/echo"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("HelloWorld")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c echo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StatusOK"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",[s("li",[t._v("使用 "),s("code",[t._v("go mod init ***")]),t._v(" 初始化 go.mod。")])]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" mod init hello\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" creating "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mod"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" module hello\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("运行"),s("code",[t._v("go run main.go")]),t._v("。")])]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" run main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" finding golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto latest\nbuild "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("D_"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cannot find module "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" path "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("D_"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api\n")])])]),s("p",[t._v("首先还是会查找并下载安装依赖，然后运行脚本 main.go，这里会抛出一个错误：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("build "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("D_"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cannot find module "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" path "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("D_"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("api\n")])])]),s("p",[t._v("但是 go.mod 已经更新：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("module hello\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.13")]),t._v("\n\nrequire "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("echo v3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.10")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("incompatible "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n  github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("labstack"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gommon v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n  golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20191206172530")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("e9b2fee46413 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("那为什么会抛出这个错误呢？")]),t._v(" "),s("p",[t._v("这是因为 main.go 中使用 internal package 的方法跟以前已经不同了，由于 go.mod 会扫描同工作目录下所有 package 并且变更引入方法，必须将 hello 当成路径的前缀，也就是需要写成 import hello/api，以往 GOPATH/dep 模式允许的 import ./api 已经失效。")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("更新旧的 package import 方式。")])]),t._v(" "),s("p",[t._v("所以 main.go 需要改写成：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  api "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello/api"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里使用的是相对路径")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/labstack/echo"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  e "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" echo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HelloWorld"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Logger"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fatal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('":1323"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("提示：在 Go 语言 1.11 版本下使用 go mod 时可能会遇到 go build github.com/valyala/fasttemplate: module requires go 1.12 这种错误，遇到类似这种需要升级到 1.12 的问题，直接升级到 Go 语言 1.12 版本以上就好了。")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("到这里就和新创建一个项目没什么区别了。")])]),t._v(" "),s("h2",{attrs:{id:"三、使用-replace-替换无法直接获取的-package"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、使用-replace-替换无法直接获取的-package"}},[t._v("#")]),t._v(" 三、使用 replace 替换无法直接获取的 package")]),t._v(" "),s("p",[t._v("由于某些已知的原因，并不是所有的 package 都能成功下载，比如：golang.org 下的包。")]),t._v(" "),s("p",[t._v("modules 可以通过在 go.mod 文件中使用 replace 指令替换成 github 上对应的库，比如：")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("replace "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20190313024323")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("a1f597ede03a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("golang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20190313024323")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("a1f597ede03a\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("或者")]),t._v(" "),s("div",{staticClass:"language-go extra-class"},[s("pre",{pre:!0,attrs:{class:"language-go"}},[s("code",[t._v("replace golang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20190313024323")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("a1f597ede03a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("golang"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20190313024323")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("a1f597ede03a\n")])])]),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://c.biancheng.net/view/5712.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Go 语言 go mod 包依赖管理工具"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);